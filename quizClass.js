const readline = require("readline");
const chalk = require("chalk");

// --------------------------------------------------------------------------------

class Quiz {
  constructor(questions) {
    this.questions = questions;
    this.score = 0;
    this.currentQuestionIndex = 0;

    // ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ´Ğ»Ñ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼

    this.rl = readline.createInterface({
      input: process.stdin,
      output: process.stdout,
    });
  }

  // Ğ—Ğ°Ğ¿ÑƒÑĞº ĞºĞ²Ğ¸Ğ·Ğ°

  start() {
    console.log(chalk.green(`
  â–‘â–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ•—â–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ•—â–ˆâ•—
  â–‘â–ˆâ•”â–ˆâ•‘â–‘â–ˆâ•”â•â–ˆâ•‘â–ˆâ•”â–ˆâ•‘â•šâ•â–ˆâ•”â•â•â–ˆâ•‘â–ˆâ•‘â•šâ•â–ˆâ•”â•â•â–ˆâ•‘â–ˆâ•‘
  â–‘â–ˆâ•‘â–ˆâ•‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ•‘â–‘â–‘â–ˆâ•‘â–ˆâ•‘
  â–‘â–ˆâ•‘â–ˆâ•‘â–‘â–ˆâ•”â•â•â•â–ˆâ•”â–ˆâ•‘â–‘â–‘â–ˆâ•‘â–‘â–‘â•šâ•â–ˆâ•‘â–‘â–‘â–ˆâ•‘â–‘â–‘â–ˆâ•‘â–ˆâ•‘
  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ•‘â–‘â–‘â–‘â–ˆâ•‘â–ˆâ•‘â–‘â–‘â–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ–ˆâ•‘
  â•šâ•â•â•â•â•â•šâ•â–‘â–‘â–‘â•šâ•â•šâ•â–‘â–‘â•šâ•â–‘â–‘â•šâ•â•â•â–‘â–‘â•šâ•â–‘â–‘â•šâ•â•â•`))
console.log('\n')
    console.log( chalk.bgGreen.black(`â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ Ğ’Ğ²Ğ¾Ğ´Ğ¸Ñ‚Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ Ğ² ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘`)); 
    console.log('\n')
    this.askNextQuestion();
  
  }

  // Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ°

  askNextQuestion() {
    if (this.currentQuestionIndex < this.questions.length) {
      const currentQuestion = this.questions[this.currentQuestionIndex];
      this.rl.question(currentQuestion.text + " ", (answer) => {
        // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ¾Ñ‚Ğ²ĞµÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
        if (currentQuestion.checkAnswer(answer)) {
          console.log('â–º---------------------------------------------')
          console.log(chalk.green.bold("âœ” ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾! ğŸ‘"));
          console.log('---------------------------------------------')
          this.score++;
        } else {
          console.log('â–º---------------------------------------------')
          console.log(chalk.red.bold("âœ— ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾! ğŸ’©"));
          console.log('---------------------------------------------')
        }

        // ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ğ¼ Ğº ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¼Ñƒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑƒ
        this.currentQuestionIndex++;
        this.askNextQuestion();
      });
    } else {
      // Ğ•ÑĞ»Ğ¸ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ğ»Ğ¸ÑÑŒ, Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ°ĞµĞ¼ ĞºĞ²Ğ¸Ğ·

      this.endQuiz();
    }
  }

  // Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğµ ĞºĞ²Ğ¸Ğ·Ğ°
  endQuiz() {
    console.log(
      `------------------------
____ğŸ¸ğŸ¸ğŸ¸ğŸ¸____ğŸ¸ğŸ¸ğŸ¸
___ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸__ğŸ¸ğŸ¸ğŸ¸ğŸ¸
__ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸
ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸
ğŸ¸ğŸ¸âšªï¸âš«ï¸âš«ï¸âšªï¸ğŸ¸ğŸ¸ğŸ¸âšªï¸âš«ï¸âš«ï¸âšªï¸
ğŸ¸âšªï¸âš«ï¸âš«ï¸âšªï¸âš«ï¸âšªï¸ğŸ¸âšªï¸âš«ï¸âš«ï¸âšªï¸âš«ï¸âšªï¸
ğŸ¸âšªï¸âš«ï¸âšªï¸âš«ï¸âš«ï¸âšªï¸ğŸ¸âšªï¸âš«ï¸âšªï¸âš«ï¸âš«ï¸âšªï¸
ğŸ¸ğŸ¸âšªï¸âš«ï¸âšªï¸âšªï¸ğŸ¸ğŸ¸ğŸ¸âšªï¸âš«ï¸âšªï¸âšªï¸
ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸
ğŸ”´ğŸ”´ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸
ğŸ¸ğŸ”´ğŸ”´ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸
ğŸ¸ğŸ¸ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´
ğŸ¸ğŸ¸ğŸ¸ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´ğŸ”´
ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸
ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸
ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸
    `)
   console.log(chalk.black.bold.bgGreen(` ĞšĞ²Ğ¸Ğ· Ğ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½! Ğ’Ğ°Ñˆ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: ${this.score} Ğ¸Ğ· ${this.questions.length} `));
    this.rl.close();
  }
}

module.exports = Quiz;
